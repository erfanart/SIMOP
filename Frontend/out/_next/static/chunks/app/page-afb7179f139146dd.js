(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{266:(e,t,a)=>{Promise.resolve().then(a.bind(a,4440))},4440:(e,t,a)=>{"use strict";a.d(t,{default:()=>f});var s=a(5155),r=a(2115),n=a(1320),l=a(2304),i=a(8619),o=a(7178),c=a(3804);function d(e){let{value:t,min:a=0,max:n=100,label:d="Value",unit:x="",width:u=300,height:m=200,colors:h=["#4CAF50","#FFC107","#F44336"],editable:f=!1,onChange:b}=e,g=(0,r.useRef)(null),[p,v]=(0,r.useState)(t),[j,w]=(0,r.useState)(String(t)),y=l.m4Y().domain([a,n]).range([-144,144]),N=(0,i.d)(y(t)),M=(0,o.z)(N,{stiffness:100,damping:20}),P=e=>l.m4Y().domain([a,n]).range([-(.8*Math.PI),.8*Math.PI])(e),R=e=>{let t=Math.max(a,Math.min(n,e));v(t),w(String(t)),N.set(y(t)),null==b||b(t)};(0,r.useEffect)(()=>{R(t)},[t]),(0,r.useEffect)(()=>{if(!g.current)return;let e=l.Ltv(g.current);e.selectAll("*").remove();let t=Math.min(u,2*m)/2-20,a=u/2,s=l.JLW().innerRadius(.6*t).outerRadius(t).startAngle(-(.8*Math.PI)).endAngle(.8*Math.PI);e.append("path").attr("d",s({innerRadius:Math.min(u,2*m)/2*.6-20,outerRadius:Math.min(u,2*m)/2-20,startAngle:-(.8*Math.PI),endAngle:0})).attr("fill","#e5e7eb").attr("transform","translate(".concat(a,", ").concat(m,")")),e.append("circle").attr("cx",a).attr("cy",m).attr("r",8).attr("fill","#1f2937"),e.append("text").attr("x",a).attr("y",m-t-10).attr("text-anchor","middle").text(d).attr("class","text-xl font-bold fill-gray-800 font-[PersianBadkh]")},[u,m,d]);let S=e=>{let t=P(e),a=Math.min(u,2*m)/2-20;return l.JLW().innerRadius(.6*a).outerRadius(a).startAngle(-(.8*Math.PI)).endAngle(t)({innerRadius:Math.min(u,2*m)/2*.6-20,outerRadius:Math.min(u,2*m)/2-20,startAngle:-(.8*Math.PI),endAngle:t})||""},k=u/2,A=Math.min(u,2*m)/2-20;return(0,s.jsxs)("div",{className:"flex flex-col items-center p-4 bg-white rounded-lg shadow-md",children:[(0,s.jsxs)("div",{className:"relative",style:{width:u,height:m},children:[(0,s.jsx)("svg",{ref:g,width:u,height:m,className:"absolute top-0 left-0"}),(0,s.jsx)("svg",{width:u,height:m,className:"absolute top-0 left-0 pointer-events-none",children:(0,s.jsx)(c.P.path,{d:S(p),fill:l.m4Y().domain([a,(a+n)/2,n]).range(h)(p),transform:"translate(".concat(k,", ").concat(m,")"),initial:!1,animate:{d:S(p)},transition:{type:"spring",damping:20,stiffness:100}})}),(0,s.jsx)(c.P.div,{className:"absolute",style:{width:3,height:A,backgroundColor:"#1f2937",left:k-1.5,top:m-A,originY:"100%",rotate:M}})]}),(0,s.jsxs)("div",{className:"mt-2 text-2xl font-bold text-gray-800",children:[p.toFixed(1)," ",x]}),f&&(0,s.jsxs)("div",{className:"mt-4 w-full",children:[(0,s.jsx)("input",{type:"number",min:a,max:n,step:"0.1",value:j,onChange:e=>{w(e.target.value)},onBlur:()=>{let e=parseFloat(j);isNaN(e)||R(e)},className:"w-full px-3 py-2 border border-gray-300 rounded-md text-center"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Range: ",a," to ",n]})]})]})}var x=a(9137),u=a.n(x);let m=()=>{let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(""),[l,i]=(0,r.useState)(!1),o=(0,r.useRef)(null),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{e.length>0&&o.current&&o.current.scrollIntoView({behavior:"smooth"})},[e]);let d=()=>{c.current&&(c.current.style.height="auto",c.current.style.height="".concat(c.current.scrollHeight,"px"))},x=s=>{s.preventDefault(),a.trim()&&(l||i(!0),t([...e,{sender:"user",text:a}]),n(""),c.current&&(c.current.style.height="40px"),setTimeout(()=>{t(e=>[...e,{sender:"bot",text:"من ربات شما هستم! چطور می‌تونم کمکتون کنم؟"}])},1e3))};return(0,s.jsxs)("div",{className:"jsx-23b8d0c727ff8b7b max-h-[50vh] h-auto flex flex-col bg-[rgba(33,33,33,0.75)] rounded-[30px] shadow-xl gap-4 p-5 transition-all duration-500",children:[(0,s.jsxs)("div",{className:"jsx-23b8d0c727ff8b7b flex-1 overflow-y-auto space-y-2 px-2 scrollbar-none",children:[!l&&(0,s.jsx)("div",{className:"jsx-23b8d0c727ff8b7b text-center text-white text-lg font-semibold max-[450px]:text-[16px]",children:"! به دستیار هوشمند خوش آمدید"}),e.map((e,t)=>(0,s.jsx)("div",{className:"jsx-23b8d0c727ff8b7b "+"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,s.jsx)("div",{dir:"rtl",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},className:"jsx-23b8d0c727ff8b7b "+"text-right p-3 rounded-lg max-w-[80%] ".concat("user"===e.sender?"bg-[#4a4a4a] text-white":"bg-[#333] text-gray-200"),children:e.text})},t)),(0,s.jsx)("div",{ref:o,className:"jsx-23b8d0c727ff8b7b"})]}),(0,s.jsxs)("div",{className:"jsx-23b8d0c727ff8b7b flex items-center bg-[#3e3e3e] p-3 rounded-full mb-1",children:[(0,s.jsx)("textarea",{ref:c,dir:"rtl",value:a,onChange:e=>{n(e.target.value),d()},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||x(e)},placeholder:"چیزی بنویسید",rows:1,style:{minHeight:"40px",maxHeight:"200px",overflowY:"auto"},className:"jsx-23b8d0c727ff8b7b flex-1 p-2 border-none focus:outline-none resize-none bg-transparent text-white"}),(0,s.jsx)("button",{onClick:x,className:"jsx-23b8d0c727ff8b7b ml-2 p-2 bg-[rgba(238,68,38,0.5)] hover:bg-[rgba(238,68,38,1)] rounded-full",children:(0,s.jsx)("img",{src:"/images/sendIcon.png",alt:"Send",className:"jsx-23b8d0c727ff8b7b w-6 h-6"})})]}),(0,s.jsx)(u(),{id:"23b8d0c727ff8b7b",children:".scrollbar-none::-webkit-scrollbar{display:none}.scrollbar-none{-ms-overflow-style:none;scrollbar-width:none}"})]})};var h=a(9509);function f(){let[e,t]=(0,r.useState)({temperature:0,humidity:0,pressure:0}),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=new n.A(h.env.NEXT_PUBLIC_WS_URL||"ws://10.160.0.1:6080/modbus");return e.onmessage=e=>{let a=JSON.parse(e.data);t(e=>({...e,...a}))},()=>e.close()},[]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8 text-gray-800 font-[PersianBadkh]",children:"پیشخوان داده حسگرها"}),(0,s.jsxs)("div",{className:"grid grid-cols-1  md:grid-cols-1 lg:grid-cols-2 gap-6 max-w-6xl mx-auto",children:[(0,s.jsx)(d,{value:e.temperature,min:0,max:100,label:"دما",unit:"\xb0C",colors:["#3b82f6","#f59e0b","#ef4444"]}),(0,s.jsx)(d,{value:e.humidity,min:0,max:100,label:"رطوبت",unit:"%",colors:["#a5b4fc","#818cf8","#6366f1"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"fixed bottom-[1%] right-[1%] z-50 w-[120px] h-[120px]",onClick:()=>{l(!a)},children:(0,s.jsx)("img",{src:"/images/ava.gif",alt:"Popup GIF",className:"cursor-pointer"})}),(0,s.jsx)("div",{className:"\n          fixed bottom-[100px] right-[110px] z-50 w-[30%] max-h-[60vh]\n           max-[1030px]:w-[50%]\n           max-[650px]:w-[70%]\n           max-[450px]:right-[85px] max-[450px]:bottom-[90px]\n          transition-all duration-500 ease-in-out\n          ".concat(a?"opacity-100 scale-100 translate-y-0 translate-x-0 ":"opacity-0 scale-0 translate-y-[50%] translate-x-[50%] pointer-events-none","\n        "),children:(0,s.jsx)(m,{})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[58,441,684,358],()=>t(266)),_N_E=e.O()}]);