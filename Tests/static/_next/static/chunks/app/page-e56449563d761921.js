(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2663:(e,t,a)=>{Promise.resolve().then(a.bind(a,8823))},8823:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});var r=a(5155),n=a(2115);function s(){let[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(""),[i,c]=(0,n.useState)(!1),l=(0,n.useRef)(null),o=(0,n.useRef)(null);(0,n.useEffect)(()=>{navigator.mediaDevices&&c(!0)},[]);let u=async()=>{if(!i)return void console.error("Not running in client context yet.");try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new MediaRecorder(e,{mimeType:"audio/webm"}),r=new WebSocket("ws://10.160.0.1:2700");o.current=r,r.onmessage=e=>{try{let t=JSON.parse(e.data);s(t.text||t.partial||"")}catch(e){console.error("Invalid JSON:",e)}},a.ondataavailable=async e=>{if(e.data.size>0&&r.readyState===WebSocket.OPEN){let t=await e.data.arrayBuffer();r.send(t)}},a.start(250),l.current=a,t(!0)}catch(e){console.error("Error accessing microphone:",e)}},d=()=>{var e,a;null==(e=l.current)||e.stop(),null==(a=o.current)||a.close(),t(!1)};return(0,r.jsx)("div",{className:"flex flex-col items-center gap-4 p-4 max-w-2xl mx-auto",children:i?(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>{e?d():u()},className:"px-6 py-2 rounded text-white ".concat(e?"bg-red-500":"bg-blue-600"),children:e?"\uD83D\uDED1 Stop":"\uD83C\uDF99️ Start Recording"}),(0,r.jsx)("pre",{className:"bg-gray-100 text-sm text-black p-4 rounded w-full min-h-[100px] whitespace-pre-wrap",children:a||"Live transcription will appear here..."})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"\uD83D\uDD04 Waiting for browser hydration..."})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(2663)),_N_E=e.O()}]);